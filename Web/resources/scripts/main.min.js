function gradeChange(){var t=$("#productTypeSelect").t();$(".baseDiv").e(function(){t==$(this).i("id")?($(this).n(),currentObjectObj=$(this)):$(this).r()})}function setDatabase(){if(null!=currentObjectObj){var t=$(currentObjectObj).s("div").s(".length").t(),e=$(currentObjectObj).s("div").s(".width").t(),i=$(currentObjectObj).s("div").s(".height").t();if(null!=t&&null!=e){objectLength=t,objectWidth=e,objectHeight=null==i?0:i,itemLength=parseInt(objectLength)+2*objectHeight,itemWidth=parseInt(objectWidth)+2*objectHeight;$(".realLength");realLength=itemLength+12,realWidth=itemWidth+12,$(".realLength").s("span").o("长度（实际）："+realLength+"mm = "+itemLength+"(理论)+"),$(".realWidth").s("span").o("宽度（实际）："+realWidth+"mm = "+itemWidth+"(理论)+"),$("#addPaperItemBtn").n()}}}function addPaperItem(){if(0!=objectLength&&0!=objectWidth){null==paperyItemPerfabObj&&(paperyItemPerfabObj=$(".paperItem"));var t=paperyItemPerfabObj.c(!0).a("#paperZone");paperItemId++,$(t).n(),$(t).m("newPaperItem"),$(t).i("id","paperid_"+paperItemId),$(t).s(".leftNoDiv").o(paperItemId);var e=new PaperItem;e.p=t,e.h=$(t).i("id"),e.l=realLength,e.d=realWidth,e.u=objectLength,e.I=objectWidth,e.f=objectHeight,paperItemsArr.g($(t).i("id"),e),setAddcomposingBtnActive(!0)}}function addcomposingItem(){null==composingItemPerfabObj&&(composingItemPerfabObj=$(".composingItem"));var t=composingItemPerfabObj.c(!0).a("#composingZone");$(t).i("id","composeid_"+composeItemId),$(t).m("newComposeItem"),$(t).n(),$(t).s(".leftNoDiv").o(composeItemId);var e=new ComposeItem;e.$=$(t).i("id"),e.v=composeItemId,e.b(t),composeItemsArr.g($(t).i("id"),e),setAddPrintingBtnVisible(!0),composeItemId++}function addPrintingItem(){null==printingItemPerfabObj&&(printingItemPerfabObj=$(".printingItem"));var t=printingItemPerfabObj.c(!0).a("#printingZone");$(t).i("id","printingid_"+printingItemId),$(t).m("newPrintingItem"),$(t).n(),$(t).s(".leftNoDiv").o(printingItemId);var e=new PrintingItem;e.P=$(t).i("id"),e.C=printingItemId,printingItemsArr.g($(t).i("id"),e);var i=new Array;$(".newComposeItem").e(function(){i.push($(this).i("id"))}),printingItemId++,e.j(),e.A(i,e.P),setAddCraftBtnVisible(!0)}function addCraftItem(){null==craftItemPerfabObj&&(craftItemPerfabObj=$(".craftItem"));var t=craftItemPerfabObj.c(!0).a("#craftZone");$(t).i("id","craftid_"+gcraftItemId),$(t).m("newCraftItem"),$(t).n(),$(t).s(".leftNoDiv").o(gcraftItemId);var e=new CraftItem;e.D=$(t).i("id"),gcraftItemsArr.g($(t).i("id"),e);var i=new Array;$(".newComposeItem").e(function(){i.push($(this).i("id"))}),e.O(i,e.D),gcraftItemId++}function paperTypeChange(t){var e=$(t).w().w().w().w().i("id"),i=$(t).t();paperItemsArr.find(e).y=i}function updateRealb(t,e){var i=$(e).w().w().w().w().i("id");paperItemsArr.find(i).L(t,e,12)}function updateRealj(t,e){var i=$(e).w().w().w().w().i("id");paperItemsArr.find(i).B(t,e,12)}function deletePaperItem(t){$(t).w().w().W(),$(".paperItem").length<2&&(setAddcomposingBtnActive(!1),deleteAllComposeItems()),paperItemsArr.W($(t).w().w().i("id"))}function setAddcomposingBtnActive(t){t?$("#addcomposingItemBtn").n():$("#addcomposingItemBtn").r()}function deleteAllComposeItems(){$(".composingItem").e(function(){$(this).W()}),setAddcomposingBtnActive(!1),deleteAllPrintItems()}function deleteComposeItem(t){var e=$(t).w().w().i("id");$(t).w().w().W(),composeItemsArr.W(e),$(".composingItem").length<2&&(setAddPrintingBtnVisible(!1),deleteAllPrintItems())}function calcCompose(){for(var t in $(".newPriceItem").e(function(){$(this).W()}),composeItemsArr.x){composeItemsArr.find(t).k()}for(var t in printingItemsArr.x){printingItemsArr.find(t).k()}for(var t in gcraftItemsArr.x){gcraftItemsArr.find(t).k()}}function showComposeTip(t,e){$(t).o(e)}function updateStaticColorV(t,e){t.N=e.replace(/\D/g,"");var i=$(t).w().w().w().w().w().w().i("id");printingItemsArr.find(i).S=t.N}function updateDynamicColorV(t,e){t.N=e.replace(/\D/g,"");var i=$(t).w().w().w().w().w().w().i("id");printingItemsArr.find(i).H=t.N}function setAddPrintingBtnVisible(t){1==t?$("#addPrintingItemBtn").n():$("#addPrintingItemBtn").r()}function deleteAllPrintItems(){$(".printingItem").e(function(){$(this).W()}),setAddPrintingBtnVisible(!1),deleteAllCraftItems()}function deletePrintingItem(t){var e=$(t).w().w().i("id");$(t).w().w().W(),printingItemsArr.W(e),$(".newPrintingItem").length<1&&(setAddCraftBtnVisible(!1),deleteAllCraftItems())}function setAddCraftBtnVisible(t){1==t?$("#addCraftItemBtn").n():$("#addCraftItemBtn").r()}function deleteAllCraftItems(){$(".newCraftItem").e(function(){$(this).W()}),setAddCraftBtnVisible(!1),gcraftItemsArr.R()}function deleteCraftItem(t){var e=$(t).w().w().i("id");$(t).w().w().W(),gcraftItemsArr.W(e)}function craftTypeChange(t){var e=$(t).t(),i=$(t).w().w().s(".craftSelectComposeDropbox"),n=$(t).w().w().w().w();gcraftItemsArr.find($(n).i("id")).T=$(t).t(),2==e?$(i).n():$(i).r()}function craftComposeSelect(t){var e=$(t).w().w().w().w();gcraftItemsArr.find($(e).i("id")).V=$(t).t()}function updateTBZPrice(t,e){t.N=e.replace(/\D/g,""),gPaperPriceArr[0]=e}function updateBKZPrice(t,e){t.N=e.replace(/\D/g,""),gPaperPriceArr[1]=e}function updateHBZPrice(t,e){t.N=e.replace(/\D/g,""),gPaperPriceArr[2]=e}function updateYWPrice(t,e){t.N=e.replace(/\D/g,""),gCraftItemPrice1=e}function updateHHPrice(t,e){t.N=e.replace(/\D/g,""),gCraftItemPrice2=e}function updateCreateNo(t,e){t.N=e.replace(/\D/g,""),gCreateProduceNum=e}var tip_CalcYourself="请自行计算尺寸 ！ ",tip_PaperTypeError="选择纸张类型不一致 ！ ";function ComposeItem(){this.$="",this.v=1,this._=1,this.Z=1,this.M=0,this.Y=0,this.z=null,this.K=0,this.q=0,this.F="",this.G=10,this.J="",this.Q=0,this.U=0,this.X=0,this.tt=0,this.et=0,this.it=1,this.nt=new Dictionary}function CraftItem(){this.D="",this.T=1,this.V=1,this.rt=""}function Dictionary(){this.g=add,this.x=new Object,this.find=find,this.W=remove,this.st=showAll,this.length=length,this.ot=count,this.R=clear,this.sort=sort}function add(t,e){this.x[t]=e}function find(t){return this.x[t]}function remove(t){delete this.x[t]}function count(){var t=0;for(var e in this.x)++t;return t}function showAll(){for(var t in this.x)document.at(t+"->"+this.x[t]),document.at("<br>")}function sort(){var t=Array();for(var e in this.x)t.push(e);t.sort();for(var i=0;i<t.length;i++)document.at(t[i]+"->"+this.x[t[i]]),document.at("<br>")}function clear(){for(var t in this.x)delete this.x[t]}ComposeItem.prototype.ct=function(t){composeArr.g(t,!0)},ComposeItem.prototype.mt=function(t){composeArr.W(t,!0)},ComposeItem.prototype.pt=function(t){null==this.nt?this.nt=new Dictionary:this.nt.R();var e=this;$(t).w().s(":input").e(function(){if(1==this.ht){var t=$(this).i("paperitemid");e.nt.g(t,!0),0}});var i=0,n=0,r=0,s=0,o=0,a=0;for(var c in this.U=0,this.nt.x){var m=paperItemsArr.find(c);if(0==a)o=m.y,r=m.l,s=m.d,currentSelectPaperL=r,currentSelectPaperW=s,this.it=o;else{if(o!=m.y){i=-1,this.U=-1;break}if(r!=m.l||s!=m.d){n=-1,this.U=-2;break}}a++,this.U++}var p=$(t).w().w().s(".composeEditDiv").s(".tipDiv"),h=$(t).w().w().s(".composeEditDiv").s(".composeEditContentDiv").s(".composeEditSizeDiv");if(-1==i)$(p).o(tip_PaperTypeError),$(p).n(),$(h).r();else if(-1==n)$(p).o(tip_CalcYourself),$(p).n(),$(h).r();else if(0==a)$(p).r(),$(h).r();else{var l="配件纸张实际长 :"+r+"* <input class='chuxueInput' type='text' name='lname' value='1' />(横排/个)= <label> "+r+"（理论长）mm </label>",d="配件纸张实际宽 :"+s+"* <input class='chuxueInput' type='text' name='lname' value='1' />(竖排/个)= <label> "+s+"（理论宽）mm </label>";$(h).s(".paperLengthDiv").lt(l),$(h).s(".paperWidthDiv").lt(d);var u=$(h).s(".paperLengthDiv").s("label");$(h).s(".paperLengthDiv").s(":input").dt(function(t){e.ut(this.N,this,u)});var I=$(h).s(".paperWidthDiv").s("label");$(h).s(".paperWidthDiv").s(":input").dt(function(t){e.It(this.N,this,I)}),$(h).n(),$(p).r()}},ComposeItem.prototype.b=function(i){$(i).s(".composingCenterDiv").s(".composingTopEditDiv").ft('名称: <input class="componseNameInput"  type="text" name="lname" /> &nbsp;&nbsp;&nbsp;加放量: <input class="componsePlusLengthInput" type="text" name="lname" value="10" />(%) ');var n=this;$(i).s(".composingCenterDiv").s(".composingTopEditDiv").s(".componseNameInput").dt(function(t){n.gt(this.N,this)}),$(i).s(".composingCenterDiv").s(".composingTopEditDiv").s(".componsePlusLengthInput").dt(function(t){n.$t(this.N,this)}),$(".newPaperItem").e(function(){var t=$(this).s(".leftNoDiv").o(),e="\t<input name="+t+" paperitemid= '"+$(this).i("id")+'\' type="checkbox" class="composeCheck" value="1"> <label  for=\''+t+"'>"+t+"</label>";$(i).s(".composingCenterDiv").s(".composingCheckBoxEditDiv").ft(e),$(i).s(".composingCenterDiv").s(".composingCheckBoxEditDiv").s(":input").vt(function(t){n.pt(this)}),this.z=i});var t=$(i).s(".composingCenterDiv").s(".composeEditDiv").s(".composeEditContentDiv").s(".composeEditRealSize");$(t).ft('<div>纸张长度<input class="composeRealLInput" type="text" name="lname" value="0" "/> (mm)</div><div>纸张宽度<input class="composeRealWInput" type="text" name="wname" value="0" />(mm)</div>'),$(t).s("div").s(".composeRealLInput").dt(function(t){n.bt(this.N,this)}),$(t).s("div").s(".composeRealWInput").dt(function(t){n.Pt(this.N,this)})},ComposeItem.prototype.gt=function(t,e){this.J=t},ComposeItem.prototype.$t=function(t,e){e.N=t.replace(/\D/g,""),this.G=t},ComposeItem.prototype.ut=function(t,e,i){e.N=t.replace(/\D/g,""),this.Z=t,$(i).o(currentSelectPaperL*t+"（理论宽）mm ")},ComposeItem.prototype.It=function(t,e,i){e.N=t.replace(/\D/g,""),this._=t,$(i).o(currentSelectPaperW*t+"（理论宽）mm ")},ComposeItem.prototype.bt=function(t,e){e.N=t.replace(/\D/g,""),this.K=t},ComposeItem.prototype.Pt=function(t,e){e.N=t.replace(/\D/g,""),this.q=t},ComposeItem.prototype.k=function(){var t=this.K*this.q*1/1e6;this.et=t,this.X=Math.ceil(1*gCreateProduceNum/Math.ceil(this._*this.Z*1/this.U)),this.tt=Math.ceil(this.X+this.X*this.G*1/100);var e=t*gPaperPriceArr[this.it-1]*this.tt,i=1*e/gCreateProduceNum,n='<div class="tableCeilClass composePriceItem"> 排版： '+this.v+"</div>",r='<div class="tableCeilClass composePriceItem"> '+this.J+"</div>",s='<div class="tableCeilClass composePriceItem"> '+e.toFixed(2),o='<div class="tableCeilClass composePriceItem"> '+i.toFixed(2);null==gPriceItemPerfabObj&&(gPriceItemPerfabObj=$(".priceItem"));var a=gPriceItemPerfabObj.c(!0).a($("#priceContainer"));$(a).m("newPriceItem"),$(a).ft(n),$(a).ft(r),$(a).ft(s),$(a).ft(o),$(a).n()},CraftItem.prototype.O=function(t,e){for(var i=new Array,n=new Array,r=$("#"+this.D).s(".craftEditDiv").s(".craftEditContentDiv").s(".craftSelectComposeDropbox").s(".ComposeSelect"),s=0;s<t.length;s++){var o=composeItemsArr.find(t[s]);i.push(o.v),n.push(t[s])}$(r).Ct();var a=this;for(s=0;s<i.length;s++)0==s&&(a.rt=n[s]),$(r).ft("<option value="+n[s]+">"+i[s]+"</option>");a=this;$(r).jt(function(t){a.rt=$(this).t()})},CraftItem.prototype.k=function(){var t=composeItemsArr.find(this.rt),e=0,i=(e="1"==this.T?gCreateProduceNum*gCraftItemPrice2:t.tt*t.et*gCraftItemPrice1)/gCreateProduceNum,n='<div class="tableCeilClass craftPriceItem"> 工艺： '+this.T+"</div>",r='<div class="tableCeilClass craftPriceItem"> '+this.T+"</div>",s='<div class="tableCeilClass craftPriceItem"> '+e.toFixed(2),o='<div class="tableCeilClass craftPriceItem"> '+i.toFixed(2);null==gPriceItemPerfabObj&&(gPriceItemPerfabObj=$(".priceItem"));var a=gPriceItemPerfabObj.c(!0).a($("#priceContainer"));$(a).m("newPriceItem"),$(a).ft(n),$(a).ft(r),$(a).ft(s),$(a).ft(o),$(a).n()};var currentObjectObj,composingItemPerfabObj,composingCheckBoxPerfabObj,printingItemPerfabObj,paperyItemPerfabObj,craftItemPerfabObj,objectLength=0,objectWidth=0,objectHeight=0,itemLength=0,itemWidth=0,realLength=0,realWidth=0,paperItemsArr=(tip_CalcYourself="请自行计算尺寸 ！ ",tip_PaperTypeError="选择纸张类型不一致 ！ ",new Dictionary),composeItemsArr=new Dictionary,printingItemsArr=new Dictionary,gcraftItemsArr=new Dictionary,paperItemId=1,currentSelectPaperL=0,currentSelectPaperW=0,composeItemId=1,printingItemId=1,gcraftItemId=1,gCreateProduceNum=5e3,gPaperPriceArr=null,gCraftItemPrice1=30,gCraftItemPrice2=30,gPriceItemPerfabObj=null,paperName=(paperItemId="","纸张"),paperMode=1,lBoold=3,ljuanbian=3,wBoold=3,wjuanbian=3,theoryLength=0,theoryWidth=0,targetObj=(realLength=0,realWidth=0,null);objectLength=0,objectHeight=0;function PaperItem(){this.h=paperItemId,this.At=paperName,this.y=paperMode,this.Dt=lBoold,this.Ot=ljuanbian,this.wt=wBoold,this.yt=wjuanbian,this.Lt=theoryLength,this.Bt=theoryWidth,this.l=realLength,this.d=realWidth,this.p=targetObj,this.u=objectLength,this.f=objectLength,this.L=updateRealbl,this.B=updateRealju,this.Wt=test1s}function test1s(){alert("enter into test 1 ")}function updateRealbl(t,e,i){e.N=t.replace(/\D/g,"");var n=$(e).w().s(".juanbianInput").t(),r=$(e).w();if("realLength"==$(r).i("class")){var s=parseInt(objectLength)+2*objectHeight,o=itemLength+2*t+2*n;this.l=o,$(r).s("span").o("长度（实际）："+o+"mm = "+s+"(理论)+")}else{s=parseInt(objectWidth)+2*objectHeight,o=itemWidth+2*t+2*n;this.d=o,$(r).s("span").o("宽度（实际）："+o+"mm = "+s+"(理论)+")}}function updateRealju(t,e,i){e.N=t.replace(/\D/g,"");var n=$(e).w().s(".chuxueInput").t(),r=$(e).w();if("realLength"==$(r).i("class")){var s=parseInt(objectLength)+2*objectHeight,o=itemLength+2*n+2*t;this.l=o,$(r).s("span").o("长度（实际）："+o+"mm = "+s+"(理论)+")}else{s=parseInt(objectWidth)+2*objectHeight,o=itemWidth+2*n+2*t;this.d=o,$(r).s("span").o("宽度（实际）："+o+"mm = "+s+"(理论)+")}}function PrintingItem(){this.P="",this.rt="",this.xt=1,this.S=0,this.H=0,this.kt=1,this.C=0}PrintingItem.prototype.j=function(){var t=$("#"+this.P).s(".printingCenterDiv").s(".printingEditDiv").s(".printingEditContentDiv").s(".slideCheckBoxDiv");$(t).ft("<input class ='singleCheckBox' type='checkbox' value='single' checked='checked' />单面 <input  class ='doubleCheckBox' type='checkbox' value='double'  />双面");var e=this;$(t).s(".singleCheckBox").vt(function(t){e.Et(this)}),$(t).s(".doubleCheckBox").vt(function(t){e.Et(this)});var i=$("#"+this.P).s(".printingCenterDiv").s(".printingCheckBoxEditDiv").s(".seconddiv").s(".ColorSelect");$(i).jt(function(t){e.xt=$(this).t()})},PrintingItem.prototype.Et=function(t){$(t).w().s('input[type="checkbox"]').e(function(){t==this?($(this).i("checked","checked"),"single"==$(this).N?this.kt=1:this.kt=2):$(this).Nt("checked")})},PrintingItem.prototype.A=function(t,e){for(var i=new Array,n=new Array,r=$("#"+this.P).s(".printingCenterDiv").s(".printingCheckBoxEditDiv").s("div").s(".ComposeSelect"),s=0;s<t.length;s++){var o=composeItemsArr.find(t[s]);i.push(o.v),n.push(t[s])}var a=this;$(r).Ct();for(s=0;s<i.length;s++)0==s&&(a.rt=n[s]),$(r).ft("<option value="+n[s]+">"+i[s]+"</option>");$(r).jt(function(t){a.rt=$(this).t()})},PrintingItem.prototype.k=function(){var t=composeItemsArr.find(this.rt).X,e=0,i=(e=t<3e3?this.S*this.xt*this.kt:this.H*t*this.xt*this.kt)/gCreateProduceNum,n='<div class="tableCeilClass printPriceItem"> 印刷： '+this.C+"</div>",r='<div class="tableCeilClass printPriceItem"> '+this.C+"</div>",s='<div class="tableCeilClass printPriceItem"> '+e.toFixed(2),o='<div class="tableCeilClass printPriceItem"> '+i.toFixed(2);null==gPriceItemPerfabObj&&(gPriceItemPerfabObj=$(".priceItem"));var a=gPriceItemPerfabObj.c(!0).a($("#priceContainer"));$(a).m("newPriceItem"),$(a).ft(n),$(a).ft(r),$(a).ft(s),$(a).ft(o),$(a).n()};